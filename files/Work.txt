5===================
Install-WindowsFeature -Name DNS -IncludeManagementTools

Add-DnsServerPrimaryZone -Name "sa.local" -ReplicationScope "None" -ZoneFile "sa.local.dns" -DynamicUpdate "NonsecureAndSecure"

Add-DnsServerResourceRecordA -ZoneName "sa.local" -Name "server1" -IPv4Address "192.168.1.10" -TimeToLive 01:00:00

Add-DnsServerPrimaryZone -NetworkID "192.168.1.0/24" -ReplicationScope "None" -ZoneFile "1.168.192.in-addr.arpa.dns"

Add-DnsServerResourceRecordPtr -Name "10" -ZoneName "1.168.192.in-addr.arpa" -PtrDomainName "server1.sa.local" -TimeToLive 01:00:00

Add-DnsServerResourceRecordCName -ZoneName "sa.local" -Name "srvwin" -HostNameAlias "server1.sa.local"

–ü—Ä–æ–≤–µ—Ä–∫–∞
nslookup server1.sa.local
nslookup 192.168.1.10
nslookup srvwin.sa.local
6===================
su -
apt-get update
apt-get install dnsmasq
mcedit /etc/dnsmasq.conf

	expand-hosts
	domain=alt.local
	bind-interfaces
	listen-address=0.0.0.0
	server=8.8.8.8
	local=/alt.local/
	no-resolv
	cname=srv.alt.local,server.alt.local

mcedit /etc/hosts

	127.0.0.1       localhost
	192.168.1.20    server.alt.local server
	—Ç—É—Ç ip –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ ip –∫–ª–∏–µ–Ω—Ç–∞   client.alt.local client

systemctl restart/status dnsmasq

–ù–∞ Windows –æ—Ç–∫—Ä–æ–π—Ç–µ:
–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –°–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ‚Üí –°–≤–æ–π—Å—Ç–≤–∞ ‚Üí IPv4 ‚Üí –°–≤–æ–π—Å—Ç–≤–∞.
–í –ø–æ–ª–µ "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π DNS-—Å–µ—Ä–≤–µ—Ä" —É–∫–∞–∂–∏—Ç–µ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ ALT Linux-—Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.1.10).
–ù–∞–∂–º–∏—Ç–µ OK.
ping server.alt.local
ping srv.alt.local
nslookup client.alt.local
nslookup 192.168.1.20
7===================
Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools

Install-ADDSForest `
  -DomainName "sa.vat" `
  -ForestMode "Win2012R2" `
  -DomainMode "Win2012R2" `
  -SafeModeAdministratorPassword (ConvertTo-SecureString "Admin123!" -AsPlainText -Force) `
  -InstallDNS:$true `
  -Force:$true

üîç 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–º–µ–Ω–∞
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:

–û—Ç–∫—Ä–æ–π—Ç–µ ¬´Active Directory ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã¬ª (dsa.msc).
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å:
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: Users, Computers, Domain Controllers.
–í Domain Controllers ‚Äî –≤–∞—à —Å–µ—Ä–≤–µ—Ä (DC1).
–û—Ç–∫—Ä–æ–π—Ç–µ DNS-–∫–æ–Ω—Å–æ–ª—å (dnsmgmt.msc):
–í –ø—Ä—è–º–æ–π –∑–æ–Ω–µ sa.vat ‚Äî –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ (A, SRV).
–í –æ–±—Ä–∞—Ç–Ω–æ–π –∑–æ–Ω–µ ‚Äî PTR-–∑–∞–ø–∏—Å—å –¥–ª—è 192.168.1.10.
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ SRV-–∑–∞–ø–∏—Å–µ–π –≤ _tcp, _sites, _msdcs ‚Äî –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è AD.
üíª 5. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Windows 10-–∫–ª–∏–µ–Ω—Ç–∞ –∫ –¥–æ–º–µ–Ω—É
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (Windows 10):
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS-—Å–µ—Ä–≤–µ—Ä –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ç–µ–≤–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ ‚Äî IP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (192.168.1.10).
–û—Ç–∫—Ä–æ–π—Ç–µ:
–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤ —Ä–∞–∑–¥–µ–ª–µ "–ò–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞").
–ù–∞–∂–º–∏—Ç–µ ¬´–ò–∑–º–µ–Ω–∏—Ç—å‚Ä¶¬ª ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ ¬´–î–æ–º–µ–Ω¬ª ‚Üí –≤–≤–µ–¥–∏—Ç–µ sa.vat.
–í–≤–µ–¥–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: Administrator, –ø–∞—Ä–æ–ª—å ‚Äî —Ç–æ—Ç –∂–µ, —á—Ç–æ –∏ –¥–ª—è DSRM, –µ—Å–ª–∏ –Ω–µ –º–µ–Ω—è–ª–∏).
–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç.
8===================
NAT —Å–µ—Ç—å –≤ –≤–∏—Ä—Ç—É–∞–ª–∫–µ
apt-get update
apt-get install task-samba-dc

sudo samba-tool domain provision \
  --use-rfc2307 \
  --server-role=dc \
  --domain=srvalt \
  --realm=SRVALT.ALT.LOCAL \
  --adminpass=123qweR! \
  --dns-backend=SAMBA_INTERNAL

sudo cp /var/lib/samba/private/krb5.conf /etc/krb5.conf
cat /etc/krb5.conf

sudo systemctl unmask samba
sudo systemctl enable samba --now
sudo systemctl status samba

sudo crontab -e
	reboot /bin/systemctl restart network
	@reboot sleep 10 && /bin/systemctl restart samba

reboot
samba-tool domain info 127.0.0.1
9===================
hostnamectl set-hostname cliatl.alt.local
sudo nano /etc/net/ifaces/eth0/options
	BOOTPROTO=dhcp
sudo systemctl restart network
ip --br a

sudo crontab -e
	@reboot /bin/systemctl restart network

sudo nano /etc/resolv.conf
	nameserver 192.168.1.20
	search alt.local

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–æ–º–µ–Ω—É —á–µ—Ä–µ–∑ GUI
–û—Ç–∫—Ä–æ–π—Ç–µ:
–ú–µ–Ω—é ‚Üí –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.
–í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É ¬´–î–æ–º–µ–Ω Active Directory¬ª.
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
–î–æ–º–µ–Ω: alt.local
–†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞: ALT (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, –∫–∞–∫ NetBIOS-–∏–º—è –¥–æ–º–µ–Ω–∞ –∏–∑ –ü–ó ‚Ññ8)
–ò–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: cliatl
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥–∞–ª–æ—á–∫—É: ¬´–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª.
–ù–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è¬ª.

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ª–∏–Ω—É–∫—Å–µ:
sudo systemctl stop dnsmasq
sudo systemctl disable dnsmasq

samba-tool computer list